<!DOCTYPE html>
<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Verifier Command Center - CivicGuard</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#2463eb",
                        "background-light": "#f6f6f8",
                        "background-dark": "#111621",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>@keyframes scan {
            0% {
                top: 0%;
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                top: 100%;
                opacity: 0;
            }
        }
        .animate-scan {
            animation: scan 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }.glass-panel {
            background: rgba(17, 22, 33, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-slate-800 dark:text-slate-200 min-h-screen flex flex-col">
<header class="h-16 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/50 flex items-center justify-between px-6 shrink-0 z-20">
<div class="flex items-center gap-4">
<div class="flex items-center gap-2">
<div class="w-8 h-8 rounded bg-primary flex items-center justify-center text-white">
<span class="material-icons text-sm">shield</span>
</div>
<div>
<h1 class="font-bold text-lg leading-tight tracking-tight text-slate-900 dark:text-white">CivicGuard</h1>
<p class="text-xs text-slate-500 dark:text-slate-400 font-medium">Verifier Command Center</p>
</div>
</div>
<div class="hidden md:flex items-center px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20 gap-2">
<span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
<span class="text-xs font-semibold text-emerald-600 dark:text-emerald-400">ONLINE - SECURE</span>
</div>
</div>
<div class="flex items-center gap-4">
<button class="p-2 text-slate-400 hover:text-primary transition-colors">
<span class="material-icons">notifications</span>
</button>
<div class="h-8 w-[1px] bg-slate-200 dark:bg-slate-700 mx-2"></div>
<div class="flex items-center gap-2 bg-slate-100 dark:bg-slate-800 py-1.5 px-3 rounded-lg border border-slate-200 dark:border-slate-700">
<span class="material-icons text-primary text-sm">admin_panel_settings</span>
<span class="text-sm font-semibold text-slate-700 dark:text-slate-300">Verifier Mode</span>
</div>
</div>
</header>
<main class="flex-1 flex relative">
<section class="flex-1 flex flex-col relative bg-black w-full">
<div class="absolute inset-0 z-0 opacity-40">
<img alt="Blurry background of a busy emergency medical tent setup" class="w-full h-full object-cover filter blur-sm grayscale" data-alt="Blurry background of a busy emergency medical tent setup" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBw-qmikMCNTy_ni9JOyBiLP2d04Y3zQ3gYV5UZLITDHwU83HffBkkxUQKWie5XxSkmxxKX-gQRhraqrNID1_0BXYcaRKA-Q8EGOpQJjhVcbXbfyLS0RxPoWD0KoIrYEUhbfqRpoIfrDaDbizuuZQjVcO_V5tQsMS9z0PkyGP1oHoSSDjHMZOyoZTFhB2xxTc4H_bALPZjFj4Mu1K1usulWumZ-gbPk8uZ-7ljERmo6w_MLLhitAQEpU9BSKsTsly7QcPQuBz0N_ZeE"/>
</div>
<div class="absolute inset-0 z-0 bg-gradient-to-b from-background-dark/80 via-transparent to-background-dark/90"></div>
<div class="flex-1 flex flex-col items-center justify-center relative z-10 p-6 mb-12">
<div class="relative w-full max-w-lg aspect-square sm:aspect-[4/3] max-h-[60vh] flex items-center justify-center mb-20">
<div class="absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-primary rounded-tl-xl shadow-[0_0_15px_rgba(36,99,235,0.5)]"></div>
<div class="absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-primary rounded-tr-xl shadow-[0_0_15px_rgba(36,99,235,0.5)]"></div>
<div class="absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-primary rounded-bl-xl shadow-[0_0_15px_rgba(36,99,235,0.5)]"></div>
<div class="absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-primary rounded-br-xl shadow-[0_0_15px_rgba(36,99,235,0.5)]"></div>
<div class="w-64 h-64 border-2 border-white/20 rounded-xl relative overflow-hidden backdrop-blur-none bg-white/5 shadow-2xl">
<div class="absolute left-0 right-0 h-0.5 bg-primary shadow-[0_0_10px_#2463eb] animate-scan z-20"></div>
<div class="absolute left-0 right-0 top-0 bottom-0 bg-gradient-to-b from-primary/5 via-transparent to-primary/5 z-10"></div>
<div class="w-full h-full opacity-20" style="background-image: radial-gradient(#fff 1px, transparent 1px); background-size: 20px 20px;"></div>
</div>
<div class="absolute -bottom-16 text-center w-full animate-pulse">
<p class="text-white text-lg font-semibold tracking-wide drop-shadow-md">Align QR code within frame</p>
<p class="text-slate-400 text-sm mt-1">Make sure lighting is adequate</p>
</div>
</div>
</div>
<div class="relative z-10 pb-8 px-6 flex justify-center gap-4 flex-wrap">
<button onclick="navigateTo('verifier_dashboard.html')" class="glass-panel hover:bg-white/10 text-white px-6 py-3 rounded-lg flex items-center gap-3 transition-all border-slate-700">
<span class="material-icons text-slate-400">arrow_back</span>
<span>Back to Dashboard</span>
</button>
<button onclick="switchCamera()" class="glass-panel hover:bg-white/10 text-white px-6 py-3 rounded-lg flex items-center gap-3 transition-all border-slate-700">
<span class="material-icons text-slate-400">cameraswitch</span>
<span>Switch Camera</span>
</button>
<button class="glass-panel hover:bg-rose-500/20 text-white px-6 py-3 rounded-lg flex items-center gap-3 transition-all border-rose-500/30 group">
<span class="material-icons text-rose-400 group-hover:text-rose-300">report_problem</span>
<span class="group-hover:text-rose-100">Report Issue</span>
</button>
</div>
</section>
</main>
</body></html>

<script>
    // Navigation function
    function navigateTo(path) {
        window.location.href = path;
    }

    let videoStream = null;

    // Initialize camera
    async function initCamera() {
        try {
            const video = document.createElement('video');
            video.setAttribute('autoplay', '');
            video.setAttribute('playsinline', '');
            video.style.width = '100%';
            video.style.height = '100%';
            video.style.objectFit = 'cover';
            
            // Get the scanner frame
            const scannerFrame = document.querySelector('.w-64.h-64');
            if (scannerFrame) {
                scannerFrame.innerHTML = '';
                scannerFrame.appendChild(video);
                
                // Add scan line overlay
                const scanLine = document.createElement('div');
                scanLine.className = 'absolute left-0 right-0 h-0.5 bg-primary shadow-[0_0_10px_#2463eb] animate-scan z-20';
                scannerFrame.appendChild(scanLine);
            }
            
            // Request camera access
            videoStream = await navigator.mediaDevices.getUserMedia({ 
                video: { 
                    facingMode: 'environment',
                    width: { ideal: 1280 },
                    height: { ideal: 720 }
                } 
            });
            
            video.srcObject = videoStream;
            
            showNotification('Camera activated successfully', 'success');
            
        } catch (error) {
            console.error('Camera access error:', error);
            showNotification('Camera access denied or not available', 'error');
            
            // Show fallback message
            const scannerFrame = document.querySelector('.w-64.h-64');
            if (scannerFrame) {
                scannerFrame.innerHTML = `
                    <div class="flex items-center justify-center h-full text-center p-4">
                        <div>
                            <span class="material-icons text-6xl text-slate-600 mb-4">videocam_off</span>
                            <p class="text-white text-sm">Camera access denied</p>
                            <p class="text-slate-400 text-xs mt-2">Please enable camera permissions</p>
                        </div>
                    </div>
                `;
            }
        }
    }

    // Switch camera function
    async function switchCamera() {
        if (videoStream) {
            videoStream.getTracks().forEach(track => track.stop());
        }
        
        try {
            const video = document.querySelector('video');
            const currentFacingMode = videoStream?.getVideoTracks()[0]?.getSettings()?.facingMode || 'environment';
            const newFacingMode = currentFacingMode === 'environment' ? 'user' : 'environment';
            
            videoStream = await navigator.mediaDevices.getUserMedia({ 
                video: { 
                    facingMode: newFacingMode,
                    width: { ideal: 1280 },
                    height: { ideal: 720 }
                } 
            });
            
            if (video) {
                video.srcObject = videoStream;
            }
            
            showNotification('Camera switched', 'success');
        } catch (error) {
            console.error('Camera switch error:', error);
            showNotification('Could not switch camera', 'error');
        }
    }

    function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        const bgColor = type === 'error' ? 'bg-red-500' : type === 'success' ? 'bg-green-500' : 'bg-blue-500';
        notification.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg z-50`;
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.style.opacity = '0';
            notification.style.transition = 'opacity 0.3s';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }

    // Load selected documents
    document.addEventListener('DOMContentLoaded', function() {
        const selectedDocs = localStorage.getItem('selectedDocuments');
        if (selectedDocs) {
            const docs = JSON.parse(selectedDocs);
            console.log('Scanning for documents:', docs);
        }
        
        // Initialize camera on page load
        initCamera();
        
        // Add switch camera button handler
        const switchBtn = document.querySelector('button:has(.material-icons:contains("cameraswitch"))');
        if (switchBtn) {
            switchBtn.addEventListener('click', switchCamera);
        }
    });

    // Cleanup on page unload
    window.addEventListener('beforeunload', () => {
        if (videoStream) {
            videoStream.getTracks().forEach(track => track.stop());
        }
    });

    // Simulate QR code scanning
    setTimeout(() => {
        console.log('QR Scanner active and ready');
    }, 1000);
</script>
</body></html>
